<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Баскаков Никита - Портфолио</title>
    <!-- Подключение Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Подключение Lenis для плавного скролла -->
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>
    <style>
        /* Настройка шрифта Inter (резервный) */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        /* TT Neoris: ВСТАВЛЕН REGULAR WOFF и WOFF2 */
        @font-face {
            font-family: 'TT Neoris';
            src: url('https://res.cloudinary.com/dt79npeea/raw/upload/v1764859192/TT_Neoris_Regular_bb9kfp.woff2') format('woff2'),
                 url('https://res.cloudinary.com/dt79npeea/raw/upload/v1764859114/TT_Neoris_Regular_mj4jee.woff') format('woff');
            font-weight: 400; /* Regular */
            font-style: normal;
        }

        /* CUSTOM TRACKING (-0.04em = -4%) */
        .tracking-custom-tight {
            letter-spacing: -0.04em;
        }

        body {
            font-family: 'TT Neoris', 'Inter', sans-serif;
            background-color: #000;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Убираем стандартные скроллбары */
        body::-webkit-scrollbar, 
        #scroll-panel::-webkit-scrollbar { 
            display: none; 
        }
        body, #scroll-panel { 
            -ms-overflow-style: none; 
            scrollbar-width: none; 
        }

        @media (min-width: 1024px) {
            body { 
                overflow: hidden; /* Блокируем скролл body на десктопе */
            }
            #scroll-panel {
                height: 100vh;
                overflow-y: auto; /* Разрешаем скролл контейнера */
                /* Важно: убираем scroll-behavior: smooth, так как Lenis берет это на себя */
                scroll-behavior: auto; 
            }
        }
        
        /* === ПРЕЛОАДЕР === */
        #preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000; opacity: 1; z-index: 9999;
            transition: opacity 0.5s ease-out;
            display: flex; justify-content: center; align-items: center;
            pointer-events: none;
        }
        .pulse-loader span {
            display: inline-block; width: 10px; height: 10px; margin: 0 5px;
            background: #fff; border-radius: 50%; opacity: 0.5;
            animation: pulse 1.2s infinite ease-in-out;
        }
        .pulse-loader span:nth-child(2) { animation-delay: 0.2s; }
        .pulse-loader span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes pulse {
            0%, 80%, 100% { opacity: 0.5; transform: scale(1); }
            40% { opacity: 1; transform: scale(1.2); }
        }
        
        /* Стили */
        .left-side-bg {
            background-image: linear-gradient(rgba(0,0,0,0.0), rgba(0,0,0,0.2)),
                url('https://res.cloudinary.com/dt79npeea/image/upload/v1764843336/photo_2025-12-04_13-05-55_pwtepu.jpg');
            background-size: cover; background-position: center 20%;
        }

        .typing-text {
            border-right: 2px solid rgba(255, 255, 255, 0.7); 
            white-space: nowrap; overflow: hidden; 
            height: 1.5em; display: inline-block; max-width: 100%;
        }
        
        /* === КАРТОЧКИ === */
        .portfolio-item { 
            position: relative;
            overflow: hidden;
            background-color: #111; 
            border: 1px solid rgba(255, 255, 255, 0.1); 
            will-change: transform, box-shadow;
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .portfolio-item:hover { 
            transform: scale(1.02); 
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 255, 255, 0.3); 
            z-index: 10;
        }

        .portfolio-item img {
            will-change: transform, filter;
            transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1), filter 0.5s ease;
            filter: grayscale(80%) brightness(0.9);
        }
        .portfolio-item:hover img {
            filter: grayscale(0%) brightness(1); 
            transform: scale(1.05);
        }
        
        .portfolio-item-text {
            background-color: transparent; 
            color: #fff;
        }
        .portfolio-item-text .title { color: #fff; }
        .portfolio-item-text .tags { color: rgba(255, 255, 255, 0.5); }


        /* === ПЛАВНОЕ ПОЯВЛЕНИЕ === */
        .reveal-on-scroll { 
            opacity: 0;
            transform: translateY(30px); 
            will-change: opacity, transform;
            transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal-on-scroll.opacity-100 {
            opacity: 1;
            transform: translateY(0);
        }
        
        #welcome-message { min-height: calc(100vh - 4rem); display: flex; flex-direction: column; justify-content: center; }

        /* === LOCKED OVERLAY === */
        .locked-overlay {
            position: absolute; inset: 0; background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(2px); display: flex; flex-direction: column;
            align-items: center; justify-content: center; opacity: 0;
            transition: opacity 0.4s ease; z-index: 20;
        }
        .portfolio-item:hover .locked-overlay { opacity: 1; }
        @media (max-width: 768px) { .locked-overlay { opacity: 1; background: rgba(255, 255, 255, 0.2); } }
        .lock-icon { animation: wobble 2s infinite ease-in-out; }
        @keyframes wobble {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        /* === POPUP === */
        #lock-popup { opacity: 0; pointer-events: none; transition: opacity 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        #lock-popup.active { opacity: 1; pointer-events: all; }
        .popup-content { transform: scale(0.95); transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        #lock-popup.active .popup-content { transform: scale(1); }

        /* === MAGIC LOCK === */
        .magic-lock-wrapper { position: relative; display: block; contain: layout paint style; }
        .magic-lock-wrapper .overlay-panel {
            position: absolute; inset: 0;
            background: rgba(0,0,0,0.7); 
            display: flex; align-items: center; justify-content: center;
            z-index: 30;
            opacity: 1; visibility: visible;
            transition: opacity 0.6s ease 0.2s, visibility 0.6s step-end 0.2s; 
        }
        .magic-lock-wrapper.unlocked .overlay-panel { opacity: 0; visibility: hidden; pointer-events: none; }
        .lock-svg { width: 64px; height: 64px; overflow: visible; }
        .shackle {
            fill: none; stroke: #fff; stroke-width: 4; stroke-linecap: round;
            transform-origin: 22% 40%;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            filter: drop-shadow(0 0 1px rgba(255,255,255,0.8));
        }
        .magic-lock-wrapper.active .shackle {
            transform: translateY(-10px) rotate(35deg); 
            filter: drop-shadow(0 0 5px rgba(255,255,255,1));
        }
        canvas.particles {
            position: absolute; inset: -50%; width: 200%; height: 200%;
            pointer-events: none; z-index: 40;
        }
    </style>
</head>
<body class="bg-black text-white antialiased">

    <!-- ПРЕЛОАДЕР -->
    <div id="preloader" class="opacity-100">
        <div class="pulse-loader">
            <span></span><span></span><span></span>
        </div>
    </div>

    <!-- POPUP -->
    <div id="lock-popup" class="fixed inset-0 z-[10000] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
        <div class="popup-content bg-white text-black p-8 max-w-sm w-full shadow-2xl relative text-center">
            <button onclick="closePopup()" class="absolute top-4 right-4 text-gray-400 hover:text-black transition">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <div class="mb-6 flex justify-center text-black">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            </div>
            <h3 id="popup-title" class="text-xl font-bold mb-3 tracking-custom-tight">История кейса</h3>
            <p id="popup-message" class="text-sm text-gray-600 mb-8 leading-relaxed">...</p>
            <a href="https://www.threads.net/@baskove33" target="_blank" class="block w-full bg-black text-white font-medium py-4 hover:bg-gray-800 transition duration-300">Перейти в Threads</a>
        </div>
    </div>

    <!-- КОНТЕЙНЕР -->
    <div class="flex flex-col lg:flex-row min-h-screen lg:h-screen">

        <!-- ЛЕВАЯ ЧАСТЬ -->
        <div class="left-side-bg hidden lg:flex lg:w-1/2 lg:h-full relative flex-col justify-between p-5 sm:p-8">
            <div class="absolute inset-0 bg-gradient-to-b from-black/00 to-black/20 pointer-events-none"></div>
            <nav class="flex justify-between text-xs text-white/60 tracking-wider relative z-10">
                <a href="#portfolio-section" class="nav-link hover:text-white transition duration-300">Портфолио</a>
                <a href="#pricing-section" class="nav-link hover:text-white transition duration-300">Стоимость</a>
                <a href="https://t.me/zorochik" target="_blank" class="hover:text-white transition duration-300">Связаться</a>
            </nav>
            <div class="flex justify-between w-full text-[10px] text-white/50 tracking-wider relative z-10">
                <span></span>  
                <span class="hidden sm:inline">Я живой, все в порядке</span>
                <span></span>
            </div>
        </div>
        
        <!-- ПРАВАЯ ЧАСТЬ -->
        <!-- Добавлен ID для контейнера контента, чтобы Lenis знал что скроллить -->
        <div id="scroll-panel" class="w-full lg:w-1/2 max-w-full lg:h-screen lg:p-12 p-4 sm:p-10 flex justify-center lg:overflow-y-auto scroll-mask-container">
            <div id="right-scroll-content" class="w-full lg:max-w-[365px] space-y-5"> 

                <!-- Приветствие -->
                <div id="welcome-message" class="bg-black shadow-lg p-8 reveal-on-scroll text-center">
                    <h3 class="text-5xl font-medium text-white mb-4 tracking-custom-tight">Приветствую!</h3>
                    <div class="flex justify-center">
                        <p id="typing-output" class="text-base text-white/70 leading-relaxed typing-text mx-auto max-w-xs"></p>
                    </div>
                </div>

                <!-- Мобильное фото -->
                <div class="block lg:hidden w-full h-[500px] left-side-bg relative flex flex-col justify-between p-5 reveal-on-scroll shadow-2xl">
                    <div class="absolute inset-0 bg-gradient-to-b from-black/00 to-black/20 pointer-events-none"></div>
                    <nav class="flex justify-between text-xs text-white/60 tracking-wider relative z-10">
                        <a href="#portfolio-section" class="nav-link hover:text-white transition duration-300">Портфолио</a>
                        <a href="#pricing-section" class="nav-link hover:text-white transition duration-300">Стоимость</a>
                        <a href="https://t.me/zorochik" target="_blank" class="hover:text-white transition duration-300">Связаться</a>
                    </nav>
                    <div class="flex justify-between w-full text-[10px] text-white/50 tracking-wider relative z-10">
                        <span></span>  
                        <span class="inline">Я живой, все в порядке</span>
                        <span></span>
                    </div>
                </div>
                
                <!-- Информация -->
                <div class="bg-white shadow-2xl p-5 reveal-on-scroll">
                    <h1 class="text-[36px] font-medium text-gray-900 tracking-custom-tight mb-2 leading-none">Баскаков Никита</h1>
                    <p class="text-base text-gray-600 mb-20 font-light">Портфолио UX/UI дизайнера</p>
                    <p class="text-sm text-gray-400 leading-relaxed">и просто хорошего человека</p>
                </div>

                <!-- Опыт -->
                <div class="bg-white shadow-lg p-5 flex justify-between items-center reveal-on-scroll">
                    <span class="text-sm text-gray-600">Опыт:</span>
                    <span class="text-xl font-medium text-gray-900"> +4 года</span>
                </div>

                <!-- Заголовок портфолио -->
                <div id="portfolio-section" class="pt-5 pb-5 scroll-mt-10 reveal-on-scroll">
                    <h2 class="text-3xl sm:text-4xl font-medium text-white tracking-custom-tight">Портфолио</h2>
                </div>

                <!-- ПРОЕКТЫ -->
                <div class="grid gap-5">
                    
                    <!-- 1. DYOR 5 -->
                    <div class="project-card-wrapper reveal-on-scroll">
                         <a href="dyor5.html" class="magic-lock-wrapper portfolio-item shadow-xl relative block">
                            <div class="overlay-panel">
                                <svg class="lock-svg" viewBox="0 0 24 24"><path class="shackle" d="M7 11V7a5 5 0 0 1 10 0v4"/><path fill="#fff" d="M3 11h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V11z"/><circle cx="12" cy="16" r="1.5" fill="#151515"/></svg>
                            </div>
                            <canvas class="particles"></canvas>
                            <div class="relative z-0">
                                <div class="w-full h-80 flex items-center justify-center overflow-hidden">
                                    <img src="https://res.cloudinary.com/dt79npeea/image/upload/v1764842242/Rectangle_39524_y5ycpn.png" class="w-full h-full object-cover">
                                </div>
                                <div class="portfolio-item-text p-5 flex justify-between items-center">
                                    <div class="title text-lg font-medium tracking-custom-tight">DYOR 5</div>
                                    <div class="tags text-right text-xs tracking-wider uppercase">UI Design / Web Design / Brand Design</div>
                                </div>
                            </div>
                        </a>
                    </div>

                    <!-- 2. American Museum of Natural History -->
                    <div class="project-card-wrapper reveal-on-scroll">
                         <a href="amnh.html" class="magic-lock-wrapper portfolio-item shadow-xl relative block">
                            <div class="overlay-panel">
                                <svg class="lock-svg" viewBox="0 0 24 24"><path class="shackle" d="M7 11V7a5 5 0 0 1 10 0v4"/><path fill="#fff" d="M3 11h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V11z"/><circle cx="12" cy="16" r="1.5" fill="#151515"/></svg>
                            </div>
                            <canvas class="particles"></canvas>
                            <div class="relative z-0">
                                <div class="w-full h-80 flex items-center justify-center overflow-hidden">
                                    <img src="https://res.cloudinary.com/dt79npeea/image/upload/v1766406851/%D0%9E%D0%B1%D0%BB%D0%BE%D0%B6%D0%BA%D0%B0_%D0%BA%D0%B5%D0%B9%D1%81%D0%B0_6_sobvrd.png" class="w-full h-full object-cover">
                                </div>
                                <div class="portfolio-item-text p-5 flex justify-between items-center">
                                    <div class="title text-lg font-medium tracking-custom-tight">American Museum of Natural History</div>
                                    <div class="tags text-right text-xs tracking-wider uppercase">Web Design</div>
                                </div>
                            </div>
                        </a>
                    </div>

                    <!-- 3. Nu i Che -->
                    <div class="project-card-wrapper reveal-on-scroll">
                         <a href="nuiche.html" class="magic-lock-wrapper portfolio-item shadow-xl relative block">
                            <div class="overlay-panel">
                                <svg class="lock-svg" viewBox="0 0 24 24"><path class="shackle" d="M7 11V7a5 5 0 0 1 10 0v4"/><path fill="#fff" d="M3 11h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V11z"/><circle cx="12" cy="16" r="1.5" fill="#151515"/></svg>
                            </div>
                            <canvas class="particles"></canvas>
                            <div class="relative z-0">
                                <div class="w-full h-80 flex items-center justify-center overflow-hidden">
                                    <img src="https://res.cloudinary.com/dt79npeea/image/upload/v1764842241/Rectangle_39518_rwxdzz.png" class="w-full h-full object-cover">
                                </div>
                                <div class="portfolio-item-text p-5 flex justify-between">
                                    <div class="title text-lg font-medium">Nu i Che</div>
                                    <div class="tags text-xs uppercase">Web Design</div>
                                </div>
                            </div>
                        </a>
                    </div>

                    <!-- 4. Nobee -->
                    <div class="project-card-wrapper reveal-on-scroll">
                        <a href="nobee.html" class="magic-lock-wrapper portfolio-item shadow-xl relative block">
                             <div class="overlay-panel">
                                <svg class="lock-svg" viewBox="0 0 24 24"><path class="shackle" d="M7 11V7a5 5 0 0 1 10 0v4"/><path fill="#fff" d="M3 11h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V11z"/><circle cx="12" cy="16" r="1.5" fill="#151515"/></svg>
                            </div>
                            <canvas class="particles"></canvas>
                            <div class="relative z-0">
                                <div class="w-full h-80 flex items-center justify-center overflow-hidden">
                                    <img src="https://res.cloudinary.com/dt79npeea/image/upload/v1764842241/Rectangle_39521_ck13rv.png" class="w-full h-full object-cover">
                                </div>
                                <div class="portfolio-item-text p-5 flex justify-between items-center">
                                    <div class="title text-lg font-medium tracking-custom-tight">Nobee</div>
                                    <div class="tags text-right text-xs tracking-wider uppercase">Web Design</div>
                                </div>
                            </div>
                        </a>
                    </div>

                    <!-- 5. Секретный проект -->
                    <div class="project-card-wrapper relative group reveal-on-scroll">
                        <div onclick="openLockedPopup('coming_soon')" class="portfolio-item shadow-xl overflow-hidden cursor-pointer relative">
                             <div class="locked-overlay" style="opacity: 1; background: rgba(255, 255, 255, 0.1);">
                                <svg class="lock-icon text-black w-8 h-8 mb-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                                <span class="text-xs font-medium text-black uppercase tracking-widest bg-white px-3 py-1">Скоро</span>
                            </div>
                            <div class="w-full h-80 flex items-center justify-center bg-gray-100 overflow-hidden">
                                <div class="w-full h-full bg-gradient-to-bl from-gray-400 to-gray-600 blur-xl scale-110"></div>
                            </div>
                            <div class="portfolio-item-text p-5 flex justify-between items-center filter blur-[2px]">
                                <div class="title text-lg font-medium tracking-custom-tight">Секретный проект</div>
                                <div class="tags text-right text-xs tracking-wider uppercase">Coming Soon</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- КНОПКА "ВСЕ КЕЙСЫ" -->
                <div class="pt-5 pb-5 reveal-on-scroll">
                    <a href="all_cases.html" class="block w-full"> 
                        <button class="group relative w-full cursor-pointer overflow-hidden border border-white text-lg font-medium py-4 text-white shadow-xl transition duration-300 rounded-none hover:text-black">
                            <span class="inline-block transition-all duration-300 group-hover:-translate-x-8 group-hover:opacity-0 z-20 relative">
                                Все кейсы
                            </span>
                            <div class="absolute left-[20%] top-[40%] h-2 w-2 scale-[1] rounded-none bg-white transition-all duration-300 group-hover:left-[0%] group-hover:top-[0%] group-hover:h-full group-hover:w-full group-hover:scale-[1.8] group-hover:bg-white z-0"></div>
                            <div class="absolute top-0 z-10 flex h-full w-full translate-x-12 items-center justify-center gap-2 text-black opacity-0 transition-all duration-300 group-hover:-translate-x-0 group-hover:opacity-100">
                                <span>Перейти на страницу</span> 
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M5 12l14 0" /><path d="M15 16l4-4" /><path d="M15 8l4 4" /></svg>
                            </div>
                        </button>
                    </a>
                </div>

                <!-- Стоимость -->
                <div id="pricing-section" class="pt-5 pb-5 scroll-mt-10 reveal-on-scroll">
                    <h2 class="text-3xl sm:text-4xl font-medium text-white tracking-custom-tight">Стоимость</h2>
                </div>
                <div class="space-y-5">
                    <div class="bg-white shadow-xl p-5 reveal-on-scroll">
                        <h3 class="text-2xl font-medium text-gray-900 mb-4 tracking-custom-tight">Дизайн сайта (Figma)</h3>
                        <p class="text-sm text-gray-600 leading-relaxed mb-8">Одностраничный сайт, промо-страница, посадочная страница для продукта или услуги. Только дизайн - без сборки.</p>
                        <div class="flex flex-col space-y-4">
                            <div class="bg-gray-100 p-4 flex justify-between items-center">
                                <span class="text-sm text-gray-600">Лендинг</span>
                                <span class="text-3xl font-medium text-gray-900"> $450</span>
                            </div>
                            <div class="bg-gray-100 p-4 flex justify-between items-center">
                                <span class="text-sm text-gray-600">Многостраничный сайт</span>
                                <span class="text-3xl font-medium text-gray-900"> $650</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white shadow-xl p-5 reveal-on-scroll">
                        <h3 class="text-2xl font-medium text-gray-900 mb-4 tracking-custom-tight">Сайт под ключ (Figma + Tilda)</h3>
                        <p class="text-sm text-gray-600 leading-relaxed mb-8">Одностраничный сайт, промо-страница, посадочная страница для продукта или услуги. Полный цикл: дизайн и сборка.</p>
                        <div class="flex flex-col space-y-4">
                            <div class="bg-gray-100 p-4 flex justify-between items-center">
                                <span class="text-sm text-gray-600">Лендинг</span>
                                <span class="text-3xl font-medium text-gray-900"> от $550</span>
                            </div>
                            <div class="bg-gray-100 p-4 flex justify-between items-center">
                                <span class="text-sm text-gray-600">Многостраничный сайт</span>
                                <span class="text-3xl font-medium text-gray-900"> от $850</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white shadow-xl p-5 reveal-on-scroll">
                        <h3 class="text-2xl font-medium text-gray-900 mb-4 tracking-custom-tight">Другие продукты?</h3>
                        <p class="text-sm text-gray-600 leading-relaxed mb-8">Графические задачи, не связанные напрямую с сайтами: баннеры, презентации, соцсети и другое.</p>
                        <div class="flex flex-col space-y-4">
                            <div class="bg-gray-100 p-4 flex justify-between items-center">
                                <span class="text-sm text-gray-600">По договоренности</span>
                                <span class="text-3xl font-medium text-gray-900"> от $50</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Кнопка заказа -->
                <a href="https://t.me/zorochik" target="_blank" class="block pt-10 reveal-on-scroll pb-12">
                    <button class="group relative w-full cursor-pointer overflow-hidden border border-white text-lg font-medium py-6 text-white shadow-xl transition duration-300 rounded-none hover:text-black">
                        <span class="inline-block transition-all duration-300 group-hover:-translate-x-8 group-hover:opacity-0 z-20 relative">Заказать сайт</span>
                        <div class="absolute left-[20%] top-[40%] h-2 w-2 scale-[1] rounded-none bg-white transition-all duration-300 group-hover:left-[0%] group-hover:top-[0%] group-hover:h-full group-hover:w-full group-hover:scale-[1.8] group-hover:bg-white z-0"></div>
                        <div class="absolute top-0 z-10 flex h-full w-full translate-x-12 items-center justify-center gap-2 text-black opacity-0 transition-all duration-300 group-hover:-translate-x-0 group-hover:opacity-100">
                            <span>Написать в Telegram</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M5 12l14 0" /><path d="M15 16l4-4" /><path d="M15 8l4 4" /></svg>
                        </div>
                    </button>
                </a>
            </div>
        </div>
    </div>

    <script>
        // === ПЕЧАТАЮЩИЙСЯ ТЕКСТ ===
        const textToType = "Спасибо за то, что посетили мой сайт.";
        const typingOutput = document.getElementById('typing-output');
        const typingSpeed = 50;
        let charIndex = 0;
        
        function typeText() {
            if (charIndex < textToType.length) {
                typingOutput.textContent += textToType.charAt(charIndex);
                charIndex++;
                typingOutput.style.width = (charIndex * 0.55) + 'em'; 
                setTimeout(typeText, typingSpeed);
            } else {
                typingOutput.style.borderRight = 'none';
                typingOutput.style.width = 'auto'; 
            }
        }

        // === ПРЕЛОАДЕР И ПЛАВНЫЕ ПЕРЕХОДЫ ===
        const preloader = document.getElementById('preloader');

        function hidePreloader() {
            if (preloader) {
                preloader.style.opacity = '0';
                setTimeout(() => {
                    preloader.style.zIndex = '-1';
                    preloader.style.pointerEvents = 'none';
                    if (typingOutput) typeText();
                }, 500);
            }
        }

        function showPreloader(e) {
            const target = e.currentTarget;
            const href = target.getAttribute('href');
            if (href && (href.startsWith('#') || target.getAttribute('target') === '_blank')) return;
            preloader.style.opacity = '1';
            preloader.style.zIndex = '9999';
            preloader.style.pointerEvents = 'all';
            e.preventDefault();
            setTimeout(() => { window.location.href = href; }, 500);
        }

        const initialObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const element = entry.target;
                if (entry.isIntersecting) {
                    element.classList.remove('opacity-0', 'translate-y-4');
                    element.classList.add('opacity-100');
                    initialObserver.unobserve(element);
                }
            });
        }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' }); 

        // === POPUP ===
        const popup = document.getElementById('lock-popup');
        const popupTitle = document.getElementById('popup-title');
        const popupMessage = document.getElementById('popup-message');

        function openLockedPopup(type) {
            if (type === 'story') {
                popupTitle.textContent = 'История кейса';
                popupMessage.textContent = 'Так как я не рассказал еще историю об этом кейсе, переходите в мой threads, там вы получите анонс и историю о том, как создавался этот кейс.';
            } else if (type === 'coming_soon') {
                popupTitle.textContent = 'Скоро будет';
                popupMessage.textContent = 'Эти кейсы практически упакованы. Обязательно подписывайтесь в threads, чтобы не упустить анонсы этих кейсов.';
            }
            popup.classList.add('active');
        }

        function closePopup() { popup.classList.remove('active'); }
        popup.addEventListener('click', (e) => { if (e.target === popup) closePopup(); });

        // ===========================================
        // === ОПТИМИЗИРОВАННАЯ МАГИЯ (MAGIC LOCK) ===
        // ===========================================
        (() => {
            const DPR = Math.min(window.devicePixelRatio || 1, 1.5);

            function activate(card) {
                if (card.classList.contains('unlocked')) return;
                if (card.classList.contains('active')) return;

                card.classList.add('active');
                
                runMagicBurst(card);

                setTimeout(() => {
                    card.classList.add('unlocked');
                }, 400);
            }

            function runMagicBurst(card) {
                const c = card.querySelector('canvas.particles');
                if (!c) return;
                
                const ctx = c.getContext('2d', { willReadFrequently: false });
                const rect = c.getBoundingClientRect();
                c.width = rect.width * DPR;
                c.height = rect.height * DPR;

                let particles = [];
                const cx = c.width / 2;
                const cy = c.height / 2;

                const spreadFactor = 11 * DPR;
                const gravity = 0.1 * DPR;
                const minDecay = 0.007;
                const maxDecay = 0.02;

                for (let i = 0; i < 45; i++) {
                    particles.push({
                        x: cx,
                        y: cy,
                        vx: (Math.random() - 0.5) * spreadFactor, 
                        vy: (Math.random() * -1) * spreadFactor - 2 * DPR, 
                        size: (Math.random() * 3 + 1.5) * DPR, 
                        alpha: 1,
                        decay: Math.random() * (maxDecay - minDecay) + minDecay 
                    });
                }

                function animate() {
                    if (particles.length === 0) {
                        ctx.clearRect(0, 0, c.width, c.height);
                        return; 
                    }

                    ctx.clearRect(0, 0, c.width, c.height);
                    ctx.fillStyle = '#fff';
                    ctx.globalCompositeOperation = 'lighter'; 
                    
                    for (let i = 0; i < particles.length; i++) {
                        let p = particles[i];
                        p.x += p.vx;
                        p.y += p.vy;
                        p.vy += gravity;
                        p.alpha -= p.decay;

                        if (p.alpha <= 0) {
                            particles.splice(i, 1);
                            i--;
                            continue;
                        }

                        ctx.globalAlpha = p.alpha;
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                        ctx.fill();
                    }
                    
                    ctx.globalCompositeOperation = 'source-over';
                    ctx.globalAlpha = 1;

                    requestAnimationFrame(animate);
                }
                
                animate();
            }

            const magicScrollObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const card = entry.target;
                    if (entry.isIntersecting) { 
                        activate(card);
                        magicScrollObserver.unobserve(card);
                    }
                });
            }, {
                rootMargin: '-40% 0px -40% 0px', 
                threshold: 0.01 
            });

            document.querySelectorAll('.magic-lock-wrapper')
                .forEach(c => {
                    c.addEventListener('pointerenter', () => activate(c), { passive: true });
                    magicScrollObserver.observe(c);
                });
        })();

        // === ИНИЦИАЛИЗАЦИЯ И LENIS ===
        document.addEventListener('DOMContentLoaded', () => {
            
            // 1. Инициализация Lenis (Только на десктопе для производительности)
            if (window.innerWidth >= 1024) {
                const scrollPanel = document.querySelector('#scroll-panel');
                const scrollContent = document.querySelector('#right-scroll-content');
                
                const lenis = new Lenis({
                    wrapper: scrollPanel, // Скроллим этот контейнер
                    content: scrollContent, // Внутренний контент
                    duration: 1.2, // Длительность инерции
                    easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)), // Easing function
                    direction: 'vertical',
                    gestureDirection: 'vertical',
                    smooth: true,
                    smoothTouch: false,
                    touchMultiplier: 2,
                });

                function raf(time) {
                    lenis.raf(time);
                    requestAnimationFrame(raf);
                }
                requestAnimationFrame(raf);

                // Сохраняем в window, чтобы использовать в кликах
                window.lenis = lenis;
            }

            // 2. Обработка якорных ссылок (Исправление резкого прыжка)
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        if (window.lenis) {
                            // Если Lenis активен, используем его метод scrollTo
                            window.lenis.scrollTo(targetElement);
                        } else {
                            // Фоллбек для мобильных или если Lenis не загрузился
                            // Для мобильных скроллим window, для десктопа (если вдруг) - панель
                            if (window.innerWidth < 1024) {
                                const y = targetElement.getBoundingClientRect().top + window.scrollY - 20; // -20 отступ
                                window.scrollTo({top: y, behavior: 'smooth'});
                            } else {
                                const panel = document.getElementById('scroll-panel');
                                if(panel) {
                                    // Вычисляем позицию внутри скроллируемой панели
                                    // offsetTop элемента относительно его родителя
                                    // Важно: это работает, если родитель relative, а элемент внутри
                                    // Простой вариант для нативного скролла контейнера:
                                    panel.scrollTo({
                                        top: targetElement.offsetTop,
                                        behavior: 'smooth'
                                    });
                                }
                            }
                        }
                    }
                });
            });

            // 3. Прелоадер на переходы
            document.querySelectorAll('a[href^="index.html"], a[href$=".html"]').forEach(link => {
                if (link.getAttribute('target') !== '_blank') link.addEventListener('click', showPreloader);
            });
            
            // 4. Reveal анимация
            document.querySelectorAll('.reveal-on-scroll').forEach((el, index) => {
                el.style.transitionDelay = `${index * 50}ms`;
                initialObserver.observe(el);
            });
        });

        window.addEventListener('load', hidePreloader);
        setTimeout(hidePreloader, 3000); 

    </script>
</body>
</html>
